"use strict";
self["webpackHotUpdatenode_template"]("main",{

/***/ "./app/components/Preloader.js":
/*!*************************************!*\
  !*** ./app/components/Preloader.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");
/* harmony import */ var prefix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prefix */ "./node_modules/prefix/index.js");
/* harmony import */ var prefix__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prefix__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var classes_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classes/Component */ "./app/classes/Component.js");
/* harmony import */ var _utils_text__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/text */ "./app/utils/text.js");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ "./node_modules/lodash/lodash.js");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _utils_easings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/easings */ "./app/utils/easings.js");







/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class extends classes_Component__WEBPACK_IMPORTED_MODULE_1__["default"] {
  constructor({
    canvas
  }) {
    super({
      classes: {},
      element: ".preloader",
      elements: {
        title: ".preloader__text",
        number: ".preloader__number",
        numberText: ".preloader__number__text"
      }
    });
    this.canvas = canvas;
    this.counter = 0;
    this.transformPrefix = prefix__WEBPACK_IMPORTED_MODULE_0___default()("transform");
    window.TEXTURES = {};
    this.elements.spans = (0,_utils_text__WEBPACK_IMPORTED_MODULE_2__.split)({
      append: true,
      element: this.elements.title,
      expression: "<br>"
    });
    (0,lodash__WEBPACK_IMPORTED_MODULE_3__.each)(this.elements.spans, element => {
      (0,_utils_text__WEBPACK_IMPORTED_MODULE_2__.split)({
        append: false,
        element,
        expression: ""
      });
    });
    this.createLoader();
  }
  createLoader() {
    this.animateIn = gsap__WEBPACK_IMPORTED_MODULE_5__.gsap.timeline();
    this.animateIn.set(this.elements.title, {
      autoAlpha: 1
    });
    (0,lodash__WEBPACK_IMPORTED_MODULE_3__.each)(this.elements.spans, (line, index) => {
      const letters = document.querySelectorAll("span");
      const onStart = _ => {
        gsap__WEBPACK_IMPORTED_MODULE_5__.gsap.fromTo(letters, {
          autoAlpha: 0,
          display: "inline-block",
          whiteSpace: "pre-line",
          y: "100%"
        }, {
          autoAlpha: 1,
          delay: 0.2,
          display: "inline-block",
          whiteSpace: "pre-line",
          duration: 1,
          ease: "back.inOut",
          stagger: 0.015,
          y: "0%"
        });
      };
      this.animateIn.fromTo(line, {
        autoAlpha: 0,
        y: "100%"
      }, {
        autoAlpha: 1,
        delay: 0.2 * index,
        duration: 1.5,
        onStart,
        ease: "expo.inOut",
        y: "0%"
      }, "start");
    });
    this.animateIn.call(_ => {
      (0,lodash__WEBPACK_IMPORTED_MODULE_3__.each)(window.ASSETS, image => {
        // this.texture = new Texture(this.canvas.gl, {
        //   generateMipmaps: false
        // })

        const media = new Image();
        media.crossOrigin = "anonymous";
        media.src = image;
        media.onload = _ => {
          this.texture.image = media;
          this.onAssetLoaded();
        };
        window.TEXTURES[image] = this.texture;
      });
    });
  }
  onAssetLoaded() {
    this.counter += 1;
    const percent = this.counter / window.ASSETS.length;
    this.elements.numberText.innerHTML = `${Math.round(percent * 100)}%`;
    if (percent === 1) {
      this.onComplete();
    }
  }
  onComplete() {
    return new Promise(() => {
      this.animateOut = gsap__WEBPACK_IMPORTED_MODULE_5__.gsap.timeline({
        delay: 1
      });
      (0,lodash__WEBPACK_IMPORTED_MODULE_3__.each)(this.elements.spans, (line, index) => {
        const letters = line.querySelectorAll("span");
        const onStart = _ => {
          gsap__WEBPACK_IMPORTED_MODULE_5__.gsap.to(letters, {
            autoAlpha: 0,
            delay: 0.2,
            display: "inline-block",
            whiteSpace: "pre-line",
            duration: 1,
            ease: "back.inOut",
            stagger: 0.015,
            y: "-100%"
          });
        };
        this.animateOut.to(line, {
          autoAlpha: 0,
          delay: 0.2 * index,
          duration: 1.5,
          onStart,
          ease: "expo.inOut",
          y: "-100%"
        }, "start");
      });
      this.animateOut.to(this.elements.numberText, {
        autoAlpha: 0,
        duration: 1,
        ease: _utils_easings__WEBPACK_IMPORTED_MODULE_4__.SMOOTH
      }, "start");
      this.animateOut.to(this.element, {
        autoAlpha: 0,
        duration: 1
      });
      this.animateOut.call(() => {
        this.emit("completed");
      });
    });
  }
  destroy() {
    this.element.parentNode.removeChild(this.element);
  }
});

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("530d471d8581e50b13dd")
/******/ })();
/******/ 
/******/ }
);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNvQixVQUFVLENBQUNqQixJQUFJLENBQUMsTUFBTTtRQUN6QixJQUFJLENBQUNtQixJQUFJLENBQUMsV0FBVyxDQUFDO01BQ3hCLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztFQUNKO0VBRUFDLE9BQU9BLENBQUEsRUFBRztJQUNSLElBQUksQ0FBQ3BELE9BQU8sQ0FBQ3FELFVBQVUsQ0FBQ0MsV0FBVyxDQUFDLElBQUksQ0FBQ3RELE9BQU8sQ0FBQztFQUNuRDtBQUNGOzs7Ozs7OztVQzdMQSIsInNvdXJjZXMiOlsid2VicGFjazovL25vZGUtdGVtcGxhdGUvLi9hcHAvY29tcG9uZW50cy9QcmVsb2FkZXIuanMiLCJ3ZWJwYWNrOi8vbm9kZS10ZW1wbGF0ZS93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ3NhcCB9IGZyb20gXCJnc2FwXCJcbmltcG9ydCB7IFRleHR1cmUgfSBmcm9tIFwib2dsXCJcbmltcG9ydCBQcmVmaXggZnJvbSBcInByZWZpeFwiXG5cbmltcG9ydCBDb21wb25lbnQgZnJvbSBcImNsYXNzZXMvQ29tcG9uZW50XCJcbmltcG9ydCB7IHNwbGl0IH0gZnJvbSBcIi4uL3V0aWxzL3RleHRcIlxuaW1wb3J0IHsgZWFjaCB9IGZyb20gXCJsb2Rhc2hcIlxuaW1wb3J0IHsgU01PT1RIIH0gZnJvbSBcIi4uL3V0aWxzL2Vhc2luZ3NcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHsgY2FudmFzIH0pIHtcbiAgICBzdXBlcih7XG4gICAgICBjbGFzc2VzOiB7fSxcbiAgICAgIGVsZW1lbnQ6IFwiLnByZWxvYWRlclwiLFxuICAgICAgZWxlbWVudHM6IHtcbiAgICAgICAgdGl0bGU6IFwiLnByZWxvYWRlcl9fdGV4dFwiLFxuICAgICAgICBudW1iZXI6IFwiLnByZWxvYWRlcl9fbnVtYmVyXCIsXG4gICAgICAgIG51bWJlclRleHQ6IFwiLnByZWxvYWRlcl9fbnVtYmVyX190ZXh0XCJcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGhpcy5jYW52YXMgPSBjYW52YXNcblxuICAgIHRoaXMuY291bnRlciA9IDBcblxuICAgIHRoaXMudHJhbnNmb3JtUHJlZml4ID0gUHJlZml4KFwidHJhbnNmb3JtXCIpXG5cbiAgICB3aW5kb3cuVEVYVFVSRVMgPSB7fVxuXG4gICAgdGhpcy5lbGVtZW50cy5zcGFucyA9IHNwbGl0KHtcbiAgICAgIGFwcGVuZDogdHJ1ZSxcbiAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudHMudGl0bGUsXG4gICAgICBleHByZXNzaW9uOiBcIjxicj5cIlxuICAgIH0pXG5cbiAgICBlYWNoKHRoaXMuZWxlbWVudHMuc3BhbnMsIGVsZW1lbnQgPT4ge1xuICAgICAgc3BsaXQoe1xuICAgICAgICBhcHBlbmQ6IGZhbHNlLFxuICAgICAgICBlbGVtZW50LFxuICAgICAgICBleHByZXNzaW9uOiBcIlwiXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICB0aGlzLmNyZWF0ZUxvYWRlcigpXG4gIH1cblxuICBjcmVhdGVMb2FkZXIoKSB7XG4gICAgdGhpcy5hbmltYXRlSW4gPSBnc2FwLnRpbWVsaW5lKClcblxuICAgIHRoaXMuYW5pbWF0ZUluLnNldCh0aGlzLmVsZW1lbnRzLnRpdGxlLCB7XG4gICAgICBhdXRvQWxwaGE6IDFcbiAgICB9KVxuXG4gICAgZWFjaCh0aGlzLmVsZW1lbnRzLnNwYW5zLCAobGluZSwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGxldHRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwic3BhblwiKVxuXG4gICAgICBjb25zdCBvblN0YXJ0ID0gXyA9PiB7XG4gICAgICAgIGdzYXAuZnJvbVRvKFxuICAgICAgICAgIGxldHRlcnMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXV0b0FscGhhOiAwLFxuICAgICAgICAgICAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIixcbiAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwicHJlLWxpbmVcIixcbiAgICAgICAgICAgIHk6IFwiMTAwJVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhdXRvQWxwaGE6IDEsXG4gICAgICAgICAgICBkZWxheTogMC4yLFxuICAgICAgICAgICAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIixcbiAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwicHJlLWxpbmVcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICAgICAgZWFzZTogXCJiYWNrLmluT3V0XCIsXG4gICAgICAgICAgICBzdGFnZ2VyOiAwLjAxNSxcbiAgICAgICAgICAgIHk6IFwiMCVcIlxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICB0aGlzLmFuaW1hdGVJbi5mcm9tVG8oXG4gICAgICAgIGxpbmUsXG4gICAgICAgIHtcbiAgICAgICAgICBhdXRvQWxwaGE6IDAsXG4gICAgICAgICAgeTogXCIxMDAlXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGF1dG9BbHBoYTogMSxcbiAgICAgICAgICBkZWxheTogMC4yICogaW5kZXgsXG4gICAgICAgICAgZHVyYXRpb246IDEuNSxcbiAgICAgICAgICBvblN0YXJ0LFxuICAgICAgICAgIGVhc2U6IFwiZXhwby5pbk91dFwiLFxuICAgICAgICAgIHk6IFwiMCVcIlxuICAgICAgICB9LFxuICAgICAgICBcInN0YXJ0XCJcbiAgICAgIClcbiAgICB9KVxuXG4gICAgdGhpcy5hbmltYXRlSW4uY2FsbChfID0+IHtcbiAgICAgIGVhY2god2luZG93LkFTU0VUUywgaW1hZ2UgPT4ge1xuICAgICAgICAvLyB0aGlzLnRleHR1cmUgPSBuZXcgVGV4dHVyZSh0aGlzLmNhbnZhcy5nbCwge1xuICAgICAgICAvLyAgIGdlbmVyYXRlTWlwbWFwczogZmFsc2VcbiAgICAgICAgLy8gfSlcblxuICAgICAgICBjb25zdCBtZWRpYSA9IG5ldyBJbWFnZSgpXG5cbiAgICAgICAgbWVkaWEuY3Jvc3NPcmlnaW4gPSBcImFub255bW91c1wiXG4gICAgICAgIG1lZGlhLnNyYyA9IGltYWdlXG4gICAgICAgIG1lZGlhLm9ubG9hZCA9IF8gPT4ge1xuICAgICAgICAgIHRoaXMudGV4dHVyZS5pbWFnZSA9IG1lZGlhXG5cbiAgICAgICAgICB0aGlzLm9uQXNzZXRMb2FkZWQoKVxuICAgICAgICB9XG5cbiAgICAgICAgd2luZG93LlRFWFRVUkVTW2ltYWdlXSA9IHRoaXMudGV4dHVyZVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgb25Bc3NldExvYWRlZCgpIHtcbiAgICB0aGlzLmNvdW50ZXIgKz0gMVxuXG4gICAgY29uc3QgcGVyY2VudCA9IHRoaXMuY291bnRlciAvIHdpbmRvdy5BU1NFVFMubGVuZ3RoXG5cbiAgICB0aGlzLmVsZW1lbnRzLm51bWJlclRleHQuaW5uZXJIVE1MID0gYCR7TWF0aC5yb3VuZChwZXJjZW50ICogMTAwKX0lYFxuXG4gICAgaWYgKHBlcmNlbnQgPT09IDEpIHtcbiAgICAgIHRoaXMub25Db21wbGV0ZSgpXG4gICAgfVxuICB9XG5cbiAgb25Db21wbGV0ZSgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4ge1xuICAgICAgdGhpcy5hbmltYXRlT3V0ID0gZ3NhcC50aW1lbGluZSh7XG4gICAgICAgIGRlbGF5OiAxXG4gICAgICB9KVxuXG4gICAgICBlYWNoKHRoaXMuZWxlbWVudHMuc3BhbnMsIChsaW5lLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBsZXR0ZXJzID0gbGluZS5xdWVyeVNlbGVjdG9yQWxsKFwic3BhblwiKVxuXG4gICAgICAgIGNvbnN0IG9uU3RhcnQgPSBfID0+IHtcbiAgICAgICAgICBnc2FwLnRvKGxldHRlcnMsIHtcbiAgICAgICAgICAgIGF1dG9BbHBoYTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAwLjIsXG4gICAgICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiLFxuICAgICAgICAgICAgd2hpdGVTcGFjZTogXCJwcmUtbGluZVwiLFxuICAgICAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgICAgICBlYXNlOiBcImJhY2suaW5PdXRcIixcbiAgICAgICAgICAgIHN0YWdnZXI6IDAuMDE1LFxuICAgICAgICAgICAgeTogXCItMTAwJVwiXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYW5pbWF0ZU91dC50byhcbiAgICAgICAgICBsaW5lLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGF1dG9BbHBoYTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAwLjIgKiBpbmRleCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxLjUsXG4gICAgICAgICAgICBvblN0YXJ0LFxuICAgICAgICAgICAgZWFzZTogXCJleHBvLmluT3V0XCIsXG4gICAgICAgICAgICB5OiBcIi0xMDAlXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic3RhcnRcIlxuICAgICAgICApXG4gICAgICB9KVxuXG4gICAgICB0aGlzLmFuaW1hdGVPdXQudG8oXG4gICAgICAgIHRoaXMuZWxlbWVudHMubnVtYmVyVGV4dCxcbiAgICAgICAge1xuICAgICAgICAgIGF1dG9BbHBoYTogMCxcbiAgICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgICBlYXNlOiBTTU9PVEhcbiAgICAgICAgfSxcbiAgICAgICAgXCJzdGFydFwiXG4gICAgICApXG5cbiAgICAgIHRoaXMuYW5pbWF0ZU91dC50byh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgYXV0b0FscGhhOiAwLFxuICAgICAgICBkdXJhdGlvbjogMVxuICAgICAgfSlcblxuICAgICAgdGhpcy5hbmltYXRlT3V0LmNhbGwoKCkgPT4ge1xuICAgICAgICB0aGlzLmVtaXQoXCJjb21wbGV0ZWRcIilcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KVxuICB9XG59XG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCI1MzBkNDcxZDg1ODFlNTBiMTNkZFwiKSJdLCJuYW1lcyI6WyJnc2FwIiwiVGV4dHVyZSIsIlByZWZpeCIsIkNvbXBvbmVudCIsInNwbGl0IiwiZWFjaCIsIlNNT09USCIsImNvbnN0cnVjdG9yIiwiY2FudmFzIiwiY2xhc3NlcyIsImVsZW1lbnQiLCJlbGVtZW50cyIsInRpdGxlIiwibnVtYmVyIiwibnVtYmVyVGV4dCIsImNvdW50ZXIiLCJ0cmFuc2Zvcm1QcmVmaXgiLCJ3aW5kb3ciLCJURVhUVVJFUyIsInNwYW5zIiwiYXBwZW5kIiwiZXhwcmVzc2lvbiIsImNyZWF0ZUxvYWRlciIsImFuaW1hdGVJbiIsInRpbWVsaW5lIiwic2V0IiwiYXV0b0FscGhhIiwibGluZSIsImluZGV4IiwibGV0dGVycyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIm9uU3RhcnQiLCJfIiwiZnJvbVRvIiwiZGlzcGxheSIsIndoaXRlU3BhY2UiLCJ5IiwiZGVsYXkiLCJkdXJhdGlvbiIsImVhc2UiLCJzdGFnZ2VyIiwiY2FsbCIsIkFTU0VUUyIsImltYWdlIiwibWVkaWEiLCJJbWFnZSIsImNyb3NzT3JpZ2luIiwic3JjIiwib25sb2FkIiwidGV4dHVyZSIsIm9uQXNzZXRMb2FkZWQiLCJwZXJjZW50IiwibGVuZ3RoIiwiaW5uZXJIVE1MIiwiTWF0aCIsInJvdW5kIiwib25Db21wbGV0ZSIsIlByb21pc2UiLCJhbmltYXRlT3V0IiwidG8iLCJlbWl0IiwiZGVzdHJveSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCJdLCJzb3VyY2VSb290IjoiIn0=